<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="800" height="600" viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
  <style>
    .component { fill: #4e89e5; stroke: #2c5aa0; stroke-width: 2; rx: 10; }
    .simulation { fill: #7eb875; stroke: #4a7c47; stroke-width: 2; }
    .sensor { fill: #e5b060; stroke: #a0702c; stroke-width: 2; }
    .plugin { fill: #c97bae; stroke: #8a4a73; stroke-width: 2; }
    .ros { fill: #6aa7a7; stroke: #4a7a7a; stroke-width: 2; }
    .text { fill: white; font-family: Arial, sans-serif; font-size: 14px; text-anchor: middle; dominant-baseline: middle; }
    .label { fill: #333; font-family: Arial, sans-serif; font-size: 14px; text-anchor: middle; }
    .arrow { stroke: #666; stroke-width: 2; marker-end: url(#arrowhead); }
  </style>

  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="400" y="30" font-size="20" font-weight="bold" text-anchor="middle" fill="#333">Gazebo Simulation Architecture</text>

  <!-- Gazebo Core Components -->
  <rect x="100" y="80" width="600" height="200" fill="#f0f8ff" stroke="#ccc" stroke-width="2" />
  <text x="400" y="110" font-size="16" font-weight="bold" text-anchor="middle" fill="#333">Gazebo Simulation Environment</text>

  <!-- Physics Engine -->
  <rect x="130" y="140" width="150" height="60" class="component" />
  <text x="205" y="170" class="text" font-size="12">Physics Engine</text>
  <text x="205" y="185" class="text" font-size="10">(ODE, Bullet, etc.)</text>

  <!-- Rendering Engine -->
  <rect x="325" y="140" width="150" height="60" class="component" />
  <text x="400" y="170" class="text" font-size="12">Rendering Engine</text>
  <text x="400" y="185" class="text" font-size="10">(OGRE-based)</text>

  <!-- Sensor System -->
  <rect x="520" y="140" width="150" height="60" class="sensor" />
  <text x="595" y="170" class="text" font-size="12">Sensor System</text>
  <text x="595" y="185" class="text" font-size="10">(Cameras, LiDAR, etc.)</text>

  <!-- World Model -->
  <ellipse cx="200" cy="250" rx="80" ry="30" class="simulation" />
  <text x="200" y="250" class="text" font-size="12">World Model</text>

  <!-- Robot Model -->
  <ellipse cx="400" cy="250" rx="80" ry="30" class="simulation" />
  <text x="400" y="250" class="text" font-size="12">Robot Model</text>

  <!-- GUI System -->
  <ellipse cx="600" cy="250" rx="80" ry="30" class="component" />
  <text x="600" y="250" class="text" font-size="12">GUI System</text>

  <!-- ROS 2 Integration Layer -->
  <rect x="100" y="320" width="600" height="180" fill="#fff0f0" stroke="#ccc" stroke-width="2" />
  <text x="400" y="350" font-size="16" font-weight="bold" text-anchor="middle" fill="#333">ROS 2 Integration Layer</text>

  <!-- Gazebo Plugins -->
  <rect x="150" y="380" width="180" height="60" class="plugin" />
  <text x="240" y="410" class="text" font-size="12">Gazebo Plugins</text>
  <text x="240" y="425" class="text" font-size="10">(diff_drive, camera, etc.)</text>

  <!-- ROS 2 Nodes -->
  <rect x="470" y="380" width="180" height="60" class="ros" />
  <text x="560" y="410" class="text" font-size="12">ROS 2 Nodes</text>
  <text x="560" y="425" class="text" font-size="10">(Controllers, Perception, etc.)</text>

  <!-- TF Tree -->
  <ellipse cx="325" y="470" rx="70" ry="25" class="ros" />
  <text x="325" y="470" class="text" font-size="12">TF Tree</text>

  <!-- Topics Connection -->
  <ellipse cx="500" y="470" rx="70" ry="25" class="ros" />
  <text x="500" y="470" class="text" font-size="12">Topics</text>

  <!-- Communication Arrows -->
  <!-- Physics to World -->
  <line x1="205" y1="200" x2="200" y2="220" class="arrow" />

  <!-- Rendering to Robot -->
  <line x1="400" y1="200" x2="400" y2="220" class="arrow" />

  <!-- Sensor to Robot -->
  <line x1="595" y1="200" x2="480" y2="220" class="arrow" />

  <!-- Plugins to ROS Nodes -->
  <line x1="330" y1="410" x2="470" y2="410" class="arrow" />

  <!-- ROS Nodes to TF -->
  <line x1="560" y1="440" x2="395" y2="470" class="arrow" />

  <!-- ROS Nodes to Topics -->
  <line x1="560" y1="440" x2="500" y2="445" class="arrow" />

  <!-- Plugins to World/Robot -->
  <line x1="240" y1="380" x2="400" y2="280" class="arrow" stroke-dasharray="5,5" />

  <!-- Plugins to Physics -->
  <line x1="240" y1="380" x2="205" y2="260" class="arrow" stroke-dasharray="5,5" />

  <!-- Legend -->
  <rect x="50" y="520" width="200" height="120" fill="none" stroke="#333" stroke-width="1" />
  <text x="150" y="540" font-size="14" font-weight="bold" text-anchor="middle" fill="#333">Legend</text>
  <rect x="60" y="560" width="20" height="15" class="component" />
  <text x="90" y="570" font-size="12" text-anchor="start" fill="#333">Core Component</text>

  <rect x="60" y="585" width="20" height="15" class="sensor" />
  <text x="90" y="595" font-size="12" text-anchor="start" fill="#333">Sensor System</text>

  <rect x="60" y="610" width="20" height="15" class="plugin" />
  <text x="90" y="620" font-size="12" text-anchor="start" fill="#333">Gazebo Plugin</text>

  <rect x="60" y="635" width="20" height="15" class="ros" />
  <text x="90" y="645" font-size="12" text-anchor="start" fill="#333">ROS 2 Component</text>

  <!-- Simulation Flow -->
  <text x="650" y="550" font-size="14" font-weight="bold" text-anchor="middle" fill="#333">Simulation Flow</text>
  <text x="650" y="570" font-size="12" text-anchor="middle" fill="#333">1. World/Robot</text>
  <text x="650" y="590" font-size="12" text-anchor="middle" fill="#333">2. Physics</text>
  <text x="650" y="610" font-size="12" text-anchor="middle" fill="#333">3. Sensors</text>
  <text x="650" y="630" font-size="12" text-anchor="middle" fill="#333">4. Plugins</text>
  <text x="650" y="650" font-size="12" text-anchor="middle" fill="#333">5. ROS 2</text>
</svg>